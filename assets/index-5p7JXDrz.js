var qe=Object.defineProperty;var ze=(e,t,n)=>t in e?qe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var le=(e,t,n)=>ze(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function A(){}const Oe=e=>e;function Le(e){return e()}function we(){return Object.create(null)}function G(e){e.forEach(Le)}function de(e){return typeof e=="function"}function X(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let ne;function ye(e,t){return e===t?!0:(ne||(ne=document.createElement("a")),ne.href=t,e===ne.href)}function Fe(e){return Object.keys(e).length===0}const Me=typeof window<"u";let Ge=Me?()=>window.performance.now():()=>Date.now(),he=Me?e=>requestAnimationFrame(e):A;const j=new Set;function Re(e){j.forEach(t=>{t.c(e)||(j.delete(t),t.f())}),j.size!==0&&he(Re)}function He(e){let t;return j.size===0&&he(Re),{promise:new Promise(n=>{j.add(t={c:e,f:n})}),abort(){j.delete(t)}}}function p(e,t){e.appendChild(t)}function Te(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function Je(e){const t=b("style");return t.textContent="/* empty */",Ke(Te(e),t),t.sheet}function Ke(e,t){return p(e.head||e,t),t.sheet}function M(e,t,n){e.insertBefore(t,n||null)}function O(e){e.parentNode&&e.parentNode.removeChild(e)}function b(e){return document.createElement(e)}function D(e){return document.createTextNode(e)}function C(){return D(" ")}function Ne(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function w(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Ue(e){return Array.from(e.childNodes)}function W(e,t){t=""+t,e.data!==t&&(e.data=t)}function ve(e,t,n){e.classList.toggle(t,!!n)}function Be(e,t,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:r})}const oe=new Map;let ie=0;function We(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}function Ze(e,t){const n={stylesheet:Je(t),rules:{}};return oe.set(e,n),n}function be(e,t,n,r,s,o,i,c=0){const l=16.666/r;let f=`{
`;for(let v=0;v<=1;v+=l){const P=t+(n-t)*o(v);f+=v*100+`%{${i(P,1-P)}}
`}const h=f+`100% {${i(n,1-n)}}
}`,d=`__svelte_${We(h)}_${c}`,_=Te(e),{stylesheet:u,rules:a}=oe.get(_)||Ze(_,e);a[d]||(a[d]=!0,u.insertRule(`@keyframes ${d} ${h}`,u.cssRules.length));const y=e.style.animation||"";return e.style.animation=`${y?`${y}, `:""}${d} ${r}ms linear ${s}ms 1 both`,ie+=1,d}function Qe(e,t){const n=(e.style.animation||"").split(", "),r=n.filter(t?o=>o.indexOf(t)<0:o=>o.indexOf("__svelte")===-1),s=n.length-r.length;s&&(e.style.animation=r.join(", "),ie-=s,ie||Ve())}function Ve(){he(()=>{ie||(oe.forEach(e=>{const{ownerNode:t}=e.stylesheet;t&&O(t)}),oe.clear())})}let Q;function Z(e){Q=e}function me(){if(!Q)throw new Error("Function called outside component initialization");return Q}function pe(e){me().$$.on_mount.push(e)}function Xe(e){me().$$.on_destroy.push(e)}function Ye(){const e=me();return(t,n,{cancelable:r=!1}={})=>{const s=e.$$.callbacks[t];if(s){const o=Be(t,n,{cancelable:r});return s.slice().forEach(i=>{i.call(e,o)}),!o.defaultPrevented}return!0}}const N=[],ce=[];let q=[];const Ee=[],$e=Promise.resolve();let ue=!1;function et(){ue||(ue=!0,$e.then(je))}function V(e){q.push(e)}const fe=new Set;let R=0;function je(){if(R!==0)return;const e=Q;do{try{for(;R<N.length;){const t=N[R];R++,Z(t),tt(t.$$)}}catch(t){throw N.length=0,R=0,t}for(Z(null),N.length=0,R=0;ce.length;)ce.pop()();for(let t=0;t<q.length;t+=1){const n=q[t];fe.has(n)||(fe.add(n),n())}q.length=0}while(N.length);for(;Ee.length;)Ee.pop()();ue=!1,fe.clear(),Z(e)}function tt(e){if(e.fragment!==null){e.update(),G(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(V)}}function nt(e){const t=[],n=[];q.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),q=t}let H;function rt(){return H||(H=Promise.resolve(),H.then(()=>{H=null})),H}function ae(e,t,n){e.dispatchEvent(Be(`${t?"intro":"outro"}${n}`))}const se=new Set;let I;function st(){I={r:0,c:[],p:I}}function ot(){I.r||G(I.c),I=I.p}function L(e,t){e&&e.i&&(se.delete(e),e.i(t))}function B(e,t,n,r){if(e&&e.o){if(se.has(e))return;se.add(e),I.c.push(()=>{se.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}const it={duration:0};function Pe(e,t,n,r){let o=t(e,n,{direction:"both"}),i=r?0:1,c=null,l=null,f=null,h;function d(){f&&Qe(e,f)}function _(a,y){const v=a.b-i;return y*=Math.abs(v),{a:i,b:a.b,d:v,duration:y,start:a.start,end:a.start+y,group:a.group}}function u(a){const{delay:y=0,duration:v=300,easing:P=Oe,tick:S=A,css:k}=o||it,g={start:Ge()+y,b:a};a||(g.group=I,I.r+=1),"inert"in e&&(a?h!==void 0&&(e.inert=h):(h=e.inert,e.inert=!0)),c||l?l=g:(k&&(d(),f=be(e,i,a,v,y,P,k)),a&&S(0,1),c=_(g,v),V(()=>ae(e,a,"start")),He(m=>{if(l&&m>l.start&&(c=_(l,v),l=null,ae(e,c.b,"start"),k&&(d(),f=be(e,i,c.b,c.duration,0,P,o.css))),c){if(m>=c.end)S(i=c.b,1-i),ae(e,c.b,"end"),l||(c.b?d():--c.group.r||G(c.group.c)),c=null;else if(m>=c.start){const x=m-c.start;i=c.a+c.d*P(x/c.duration),S(i,1-i)}}return!!(c||l)}))}return{run(a){de(o)?rt().then(()=>{o=o({direction:a?"in":"out"}),u(a)}):u(a)},end(){d(),c=l=null}}}function re(e){e&&e.c()}function K(e,t,n){const{fragment:r,after_update:s}=e.$$;r&&r.m(t,n),V(()=>{const o=e.$$.on_mount.map(Le).filter(de);e.$$.on_destroy?e.$$.on_destroy.push(...o):G(o),e.$$.on_mount=[]}),s.forEach(V)}function U(e,t){const n=e.$$;n.fragment!==null&&(nt(n.after_update),G(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function ct(e,t){e.$$.dirty[0]===-1&&(N.push(e),et(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Y(e,t,n,r,s,o,i=null,c=[-1]){const l=Q;Z(e);const f=e.$$={fragment:null,ctx:[],props:o,update:A,not_equal:s,bound:we(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:we(),dirty:c,skip_bound:!1,root:t.target||l.$$.root};i&&i(f.root);let h=!1;if(f.ctx=n?n(e,t.props||{},(d,_,...u)=>{const a=u.length?u[0]:_;return f.ctx&&s(f.ctx[d],f.ctx[d]=a)&&(!f.skip_bound&&f.bound[d]&&f.bound[d](a),h&&ct(e,d)),_}):[],f.update(),h=!0,G(f.before_update),f.fragment=r?r(f.ctx):!1,t.target){if(t.hydrate){const d=Ue(t.target);f.fragment&&f.fragment.l(d),d.forEach(O)}else f.fragment&&f.fragment.c();t.intro&&L(e.$$.fragment),K(e,t.target,t.anchor),je()}Z(l)}class ${constructor(){le(this,"$$");le(this,"$$set")}$destroy(){U(this,1),this.$destroy=A}$on(t,n){if(!de(n))return A;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const s=r.indexOf(n);s!==-1&&r.splice(s,1)}}$set(t){this.$$set&&!Fe(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const lt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(lt);const z=10,F=20,E=30,ke=["Ты удалил этот ряд, как настоящий профессионал!","Ты прирожденный игрок, приятель!","Этот ход был круче, чем мои фильмы.","Транспортировщик линий!","Взял нож - режь, взял дошик - ешь.","Я живу, как карта ляжет. Ты живёшь, как мамка скажет.","Если заблудился в лесу, иди домой.","Никогда не сдавайтесь, идите к своей цели! А если будет сложно – сдавайтесь","Работа — это не волк. Работа — ворк. А волк — это ходить.","Если тебе где-то не рады в рваных носках, то и в целых туда идти не стоит.","Без подошвы тапочки — это просто тряпочки.","Я вообще делаю что хочу. Хочу импланты — звоню врачу.","В жизни всегда есть две дороги: одна — первая, а другая — вторая."],Se=["/tetris/images/statham1.jpg","/tetris/images/statham2.jpg","/tetris/images/statham3.jpg","/tetris/images/statham4.jpg"],ft={I:{shape:[[1,1,1,1]],color:"#00f0f0"},O:{shape:[[1,1],[1,1]],color:"#f0f000"},T:{shape:[[0,1,0],[1,1,1]],color:"#a000f0"},S:{shape:[[0,1,1],[1,1,0]],color:"#00f000"},Z:{shape:[[1,1,0],[0,1,1]],color:"#f00000"},J:{shape:[[1,0,0],[1,1,1]],color:"#0000f0"},L:{shape:[[0,0,1],[1,1,1]],color:"#f0a000"}};function at(e){let t,n;return{c(){t=b("div"),n=b("canvas"),w(n,"width",z*E),w(n,"height",F*E),w(n,"class","game-board svelte-qgb2b6"),w(t,"class","game-board-container svelte-qgb2b6")},m(r,s){M(r,t,s),p(t,n),e[5](n)},p:A,i:A,o:A,d(r){r&&O(t),e[5](null)}}}function ut(e,t,n){let{board:r=Array(F).fill().map(()=>Array(z).fill(0))}=t,{currentPiece:s}=t,{currentPosition:o}=t;Ye();let i,c,l,f=!1;pe(()=>{n(4,c=i.getContext("2d")),l=new Image,l.src="/images/statham-face.jpg",l.onload=()=>{f=!0,h()},l.onerror=()=>{console.error("Failed to load Statham face image"),f=!1,h()},h()});function h(){if(c){c.clearRect(0,0,i.width,i.height);for(let u=0;u<F;u++)for(let a=0;a<z;a++)r[u][a]&&d(a*E,u*E);s&&o&&s.shape.forEach((u,a)=>{u.forEach((y,v)=>{if(y){const P=(o.x+v)*E,S=(o.y+a)*E;d(P,S)}})})}}function d(u,a){if(n(4,c.fillStyle="#666666",c),c.fillRect(u,a,E,E),f)try{const y=document.createElement("canvas");y.width=E,y.height=E,y.getContext("2d").drawImage(l,0,0,E,E),c.drawImage(y,u,a)}catch(y){console.error("Error drawing scaled image:",y)}n(4,c.strokeStyle="#000",c),n(4,c.lineWidth=2,c),c.strokeRect(u,a,E,E)}function _(u){ce[u?"unshift":"push"](()=>{i=u,n(0,i)})}return e.$$set=u=>{"board"in u&&n(1,r=u.board),"currentPiece"in u&&n(2,s=u.currentPiece),"currentPosition"in u&&n(3,o=u.currentPosition)},e.$$.update=()=>{e.$$.dirty&30&&(r||s||o)&&c&&h()},[i,r,s,o,c,_]}class dt extends ${constructor(t){super(),Y(this,t,ut,at,X,{board:1,currentPiece:2,currentPosition:3})}}function ht(e){let t,n,r,s;return{c(){t=b("div"),n=b("h3"),n.textContent="Next Piece",r=C(),s=b("canvas"),w(n,"class","svelte-owzvpt"),w(s,"width",e[2]),w(s,"height",e[1]),w(s,"class","next-piece-canvas svelte-owzvpt"),w(t,"class","next-piece svelte-owzvpt")},m(o,i){M(o,t,i),p(t,n),p(t,r),p(t,s),e[5](s)},p(o,[i]){i&4&&w(s,"width",o[2]),i&2&&w(s,"height",o[1])},i:A,o:A,d(o){o&&O(t),e[5](null)}}}function mt(e,t,n){let r,s,{piece:o}=t,i,c,l;pe(()=>{n(4,c=i.getContext("2d")),l=new Image,l.src="/images/statham-face.jpg",f()});function f(){!c||!o||(c.clearRect(0,0,i.width,i.height),o.shape.forEach((_,u)=>{_.forEach((a,y)=>{a&&h(y*E,u*E)})}))}function h(_,u){const a=c.createPattern(l,"repeat");n(4,c.fillStyle=a,c),c.fillRect(_,u,E,E),n(4,c.strokeStyle="#000",c),c.strokeRect(_,u,E,E)}function d(_){ce[_?"unshift":"push"](()=>{i=_,n(0,i)})}return e.$$set=_=>{"piece"in _&&n(3,o=_.piece)},e.$$.update=()=>{e.$$.dirty&8&&n(2,r=o?o.shape[0].length*E:E*4),e.$$.dirty&8&&n(1,s=o?o.shape.length*E:E*4),e.$$.dirty&24&&o&&c&&f()},[i,s,r,o,c,d]}class pt extends ${constructor(t){super(),Y(this,t,mt,ht,X,{piece:3})}}function gt(e){let t,n,r,s,o,i,c,l,f,h,d,_,u,a,y,v,P,S;return{c(){t=b("div"),n=b("div"),r=b("h3"),r.textContent="Score",s=C(),o=b("p"),i=D(e[0]),c=C(),l=b("div"),f=b("h3"),f.textContent="Level",h=C(),d=b("p"),_=D(e[1]),u=C(),a=b("div"),y=b("h3"),y.textContent="Lines",v=C(),P=b("p"),S=D(e[2]),w(r,"class","svelte-wbf86x"),w(o,"class","svelte-wbf86x"),w(n,"class","score-item svelte-wbf86x"),w(f,"class","svelte-wbf86x"),w(d,"class","svelte-wbf86x"),w(l,"class","score-item svelte-wbf86x"),w(y,"class","svelte-wbf86x"),w(P,"class","svelte-wbf86x"),w(a,"class","score-item svelte-wbf86x"),w(t,"class","score-board svelte-wbf86x")},m(k,g){M(k,t,g),p(t,n),p(n,r),p(n,s),p(n,o),p(o,i),p(t,c),p(t,l),p(l,f),p(l,h),p(l,d),p(d,_),p(t,u),p(t,a),p(a,y),p(a,v),p(a,P),p(P,S)},p(k,[g]){g&1&&W(i,k[0]),g&2&&W(_,k[1]),g&4&&W(S,k[2])},i:A,o:A,d(k){k&&O(t)}}}function _t(e,t,n){let{score:r=0}=t,{level:s=1}=t,{lines:o=0}=t;return e.$$set=i=>{"score"in i&&n(0,r=i.score),"level"in i&&n(1,s=i.level),"lines"in i&&n(2,o=i.lines)},[r,s,o]}class wt extends ${constructor(t){super(),Y(this,t,_t,gt,X,{score:0,level:1,lines:2})}}function xe(e,{delay:t=0,duration:n=400,easing:r=Oe}={}){const s=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:r,css:o=>`opacity: ${o*s}`}}function Ae(e){let t,n,r,s,o,i,c,l;return{c(){t=b("div"),n=b("img"),s=C(),o=b("p"),i=D(e[1]),ye(n.src,r=e[2])||w(n,"src",r),w(n,"alt","Jason Statham"),w(n,"class","statham-image svelte-fx4k8r"),w(o,"class","quote svelte-fx4k8r"),w(t,"class","effect-content svelte-fx4k8r")},m(f,h){M(f,t,h),p(t,n),p(t,s),p(t,o),p(o,i),l=!0},p(f,h){(!l||h&4&&!ye(n.src,r=f[2]))&&w(n,"src",r),(!l||h&2)&&W(i,f[1])},i(f){l||(f&&V(()=>{l&&(c||(c=Pe(t,xe,{duration:300},!0)),c.run(1))}),l=!0)},o(f){f&&(c||(c=Pe(t,xe,{duration:300},!1)),c.run(0)),l=!1},d(f){f&&O(t),f&&c&&c.end()}}}function yt(e){let t,n=e[0]&&Ae(e);return{c(){t=b("div"),n&&n.c(),w(t,"class","effect-container svelte-fx4k8r"),ve(t,"visible",e[0])},m(r,s){M(r,t,s),n&&n.m(t,null)},p(r,[s]){r[0]?n?(n.p(r,s),s&1&&L(n,1)):(n=Ae(r),n.c(),L(n,1),n.m(t,null)):n&&(st(),B(n,1,1,()=>{n=null}),ot()),s&1&&ve(t,"visible",r[0])},i(r){L(n)},o(r){B(n)},d(r){r&&O(t),n&&n.d()}}}function vt(e,t,n){let{show:r=!1}=t,s="",o="";return e.$$set=i=>{"show"in i&&n(0,r=i.show)},e.$$.update=()=>{e.$$.dirty&1&&r&&(n(1,s=ke[Math.floor(Math.random()*ke.length)]),n(2,o=Se[Math.floor(Math.random()*Se.length)]))},[r,s,o]}class bt extends ${constructor(t){super(),Y(this,t,vt,yt,X,{show:0})}}function Ce(){return Array(F).fill().map(()=>Array(z).fill(0))}function J(){const e="IJLOSTZ",t=e[Math.floor(Math.random()*e.length)];return ft[t]}function T(e,t,n){return t.shape.every((r,s)=>r.every((o,i)=>{let c=n.x+i,l=n.y+s;return o===0||c>=0&&c<z&&l<F&&e[l]&&e[l][c]===0}))}function Et(e,t,n){const r=e.map(s=>[...s]);return t.shape.forEach((s,o)=>{s.forEach((i,c)=>{i&&(r[n.y+o][n.x+c]=1)})}),r}function Pt(e){let t=0;const n=e.filter(r=>r.every(s=>s===1)?(t++,!1):!0);for(;n.length<F;)n.unshift(Array(z).fill(0));return{newBoard:n,linesCleared:t}}function kt(e,t){return[0,40,100,300,1200][e]*(t+1)}function St(e){return Math.floor(e/10)}function xt(e){return Math.max(100,1e3-e*100)}function At(e){const t=e.shape[0].map((n,r)=>e.shape.map(s=>s[r]).reverse());return{...e,shape:t}}function Ie(e){let t,n,r;return{c(){t=b("button"),t.textContent="Pause",w(t,"class","svelte-1cdf8s")},m(s,o){M(s,t,o),n||(r=Ne(t,"click",e[11]),n=!0)},p:A,d(s){s&&O(t),n=!1,r()}}}function Ct(e){let t,n,r,s,o,i,c,l,f,h,d,_=e[7]?"New Game":e[8]?"Resume":"Start",u,a,y,v,P,S,k;r=new bt({props:{show:e[9]}}),i=new pt({props:{piece:e[2]}}),l=new wt({props:{score:e[4],level:e[6],lines:e[5]}});let g=!e[7]&&!e[8]&&Ie(e);return v=new dt({props:{board:e[0],currentPiece:e[1],currentPosition:e[3]}}),{c(){t=b("main"),n=b("div"),re(r.$$.fragment),s=C(),o=b("div"),re(i.$$.fragment),c=C(),re(l.$$.fragment),f=C(),h=b("div"),d=b("button"),u=D(_),a=C(),g&&g.c(),y=C(),re(v.$$.fragment),w(d,"class","svelte-1cdf8s"),w(h,"class","controls svelte-1cdf8s"),w(o,"class","game-info svelte-1cdf8s"),w(n,"class","game-container svelte-1cdf8s"),w(t,"class","svelte-1cdf8s")},m(m,x){M(m,t,x),p(t,n),K(r,n,null),p(n,s),p(n,o),K(i,o,null),p(o,c),K(l,o,null),p(o,f),p(o,h),p(h,d),p(d,u),p(h,a),g&&g.m(h,null),p(n,y),K(v,n,null),P=!0,S||(k=Ne(d,"click",e[10]),S=!0)},p(m,[x]){const ge={};x&512&&(ge.show=m[9]),r.$set(ge);const _e={};x&4&&(_e.piece=m[2]),i.$set(_e);const ee={};x&16&&(ee.score=m[4]),x&64&&(ee.level=m[6]),x&32&&(ee.lines=m[5]),l.$set(ee),(!P||x&384)&&_!==(_=m[7]?"New Game":m[8]?"Resume":"Start")&&W(u,_),!m[7]&&!m[8]?g?g.p(m,x):(g=Ie(m),g.c(),g.m(h,null)):g&&(g.d(1),g=null);const te={};x&1&&(te.board=m[0]),x&2&&(te.currentPiece=m[1]),x&8&&(te.currentPosition=m[3]),v.$set(te)},i(m){P||(L(r.$$.fragment,m),L(i.$$.fragment,m),L(l.$$.fragment,m),L(v.$$.fragment,m),P=!0)},o(m){B(r.$$.fragment,m),B(i.$$.fragment,m),B(l.$$.fragment,m),B(v.$$.fragment,m),P=!1},d(m){m&&O(t),U(r),U(i),U(l),g&&g.d(),U(v),S=!1,k()}}}function It(e,t,n){let r=Ce(),s=J(),o=J(),i={x:4,y:0},c=0,l=0,f=0,h=!1,d=!1,_=!1,u;function a(){h&&(n(0,r=Ce()),n(1,s=J()),n(2,o=J()),n(3,i={x:4,y:0}),n(4,c=0),n(5,l=0),n(6,f=0),n(7,h=!1)),n(8,d=!1),y()}function y(){clearInterval(u),u=setInterval(v,xt(f))}function v(){if(d||h)return;const k={...i,y:i.y+1};if(T(r,s,k))n(3,i=k);else{n(0,r=Et(r,s,i));const{newBoard:g,linesCleared:m}=Pt(r);m>0&&(n(9,_=!0),setTimeout(()=>n(9,_=!1),3e3),n(0,r=g),n(5,l+=m),n(4,c+=kt(m,f)),n(6,f=St(l)),y()),n(1,s=o),n(2,o=J()),n(3,i={x:4,y:0}),T(r,s,i)||(n(7,h=!0),clearInterval(u))}}function P(k){if(!(h||d))switch(k.key){case"ArrowLeft":{const g={...i,x:i.x-1};T(r,s,g)&&n(3,i=g);break}case"ArrowRight":{const g={...i,x:i.x+1};T(r,s,g)&&n(3,i=g);break}case"ArrowDown":{v();break}case"ArrowUp":{const g=At(s);T(r,g,i)&&n(1,s=g);break}case" ":{for(;T(r,s,{...i,y:i.y+1});)n(3,i={...i,y:i.y+1});v();break}case"p":{n(8,d=!d);break}}}return pe(()=>{window.addEventListener("keydown",P)}),Xe(()=>{clearInterval(u),window.removeEventListener("keydown",P)}),[r,s,o,i,c,l,f,h,d,_,a,()=>n(8,d=!0)]}class Ot extends ${constructor(t){super(),Y(this,t,It,Ct,X,{})}}const De=document.getElementById("app");De||console.error("Target element #app not found!");new Ot({target:De});
