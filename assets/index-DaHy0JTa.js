var He=Object.defineProperty;var Fe=(e,t,n)=>t in e?He(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ce=(e,t,n)=>Fe(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function C(){}const Le=e=>e;function Re(e){return e()}function ve(){return Object.create(null)}function K(e){e.forEach(Re)}function he(e){return typeof e=="function"}function Q(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let ne;function be(e,t){return e===t?!0:(ne||(ne=document.createElement("a")),ne.href=t,e===ne.href)}function ze(e){return Object.keys(e).length===0}const Te=typeof window<"u";let Ke=Te?()=>window.performance.now():()=>Date.now(),me=Te?e=>requestAnimationFrame(e):C;const H=new Set;function Ne(e){H.forEach(t=>{t.c(e)||(H.delete(t),t.f())}),H.size!==0&&me(Ne)}function Ue(e){let t;return H.size===0&&me(Ne),{promise:new Promise(n=>{H.add(t={c:e,f:n})}),abort(){H.delete(t)}}}function g(e,t){e.appendChild(t)}function Be(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function We(e){const t=y("style");return t.textContent="/* empty */",Ve(Be(e),t),t.sheet}function Ve(e,t){return g(e.head||e,t),t.sheet}function B(e,t,n){e.insertBefore(t,n||null)}function M(e){e.parentNode&&e.parentNode.removeChild(e)}function y(e){return document.createElement(e)}function N(e){return document.createTextNode(e)}function O(){return N(" ")}function Xe(){return N("")}function ge(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function p(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Ye(e){return Array.from(e.childNodes)}function X(e,t){t=""+t,e.data!==t&&(e.data=t)}function De(e,t,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:r})}const oe=new Map;let ie=0;function Ze(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}function Je(e,t){const n={stylesheet:We(t),rules:{}};return oe.set(e,n),n}function Ee(e,t,n,r,s,i,o,l=0){const f=16.666/r;let c=`{
`;for(let E=0;E<=1;E+=f){const v=t+(n-t)*i(E);c+=E*100+`%{${o(v,1-v)}}
`}const h=c+`100% {${o(n,1-n)}}
}`,d=`__svelte_${Ze(h)}_${l}`,m=Be(e),{stylesheet:a,rules:u}=oe.get(m)||Je(m,e);u[d]||(u[d]=!0,a.insertRule(`@keyframes ${d} ${h}`,a.cssRules.length));const _=e.style.animation||"";return e.style.animation=`${_?`${_}, `:""}${d} ${r}ms linear ${s}ms 1 both`,ie+=1,d}function Qe(e,t){const n=(e.style.animation||"").split(", "),r=n.filter(t?i=>i.indexOf(t)<0:i=>i.indexOf("__svelte")===-1),s=n.length-r.length;s&&(e.style.animation=r.join(", "),ie-=s,ie||$e())}function $e(){me(()=>{ie||(oe.forEach(e=>{const{ownerNode:t}=e.stylesheet;t&&M(t)}),oe.clear())})}let Z;function Y(e){Z=e}function pe(){if(!Z)throw new Error("Function called outside component initialization");return Z}function _e(e){pe().$$.on_mount.push(e)}function je(e){pe().$$.on_destroy.push(e)}function et(){const e=pe();return(t,n,{cancelable:r=!1}={})=>{const s=e.$$.callbacks[t];if(s){const i=De(t,n,{cancelable:r});return s.slice().forEach(o=>{o.call(e,i)}),!i.defaultPrevented}return!0}}const G=[],le=[];let F=[];const ke=[],tt=Promise.resolve();let de=!1;function nt(){de||(de=!0,tt.then(Ge))}function J(e){F.push(e)}const fe=new Set;let j=0;function Ge(){if(j!==0)return;const e=Z;do{try{for(;j<G.length;){const t=G[j];j++,Y(t),rt(t.$$)}}catch(t){throw G.length=0,j=0,t}for(Y(null),G.length=0,j=0;le.length;)le.pop()();for(let t=0;t<F.length;t+=1){const n=F[t];fe.has(n)||(fe.add(n),n())}F.length=0}while(G.length);for(;ke.length;)ke.pop()();de=!1,fe.clear(),Y(e)}function rt(e){if(e.fragment!==null){e.update(),K(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(J)}}function st(e){const t=[],n=[];F.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),F=t}let U;function ot(){return U||(U=Promise.resolve(),U.then(()=>{U=null})),U}function ae(e,t,n){e.dispatchEvent(De(`${t?"intro":"outro"}${n}`))}const se=new Set;let I;function it(){I={r:0,c:[],p:I}}function lt(){I.r||K(I.c),I=I.p}function L(e,t){e&&e.i&&(se.delete(e),e.i(t))}function q(e,t,n,r){if(e&&e.o){if(se.has(e))return;se.add(e),I.c.push(()=>{se.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}const ct={duration:0};function Pe(e,t,n,r){let i=t(e,n,{direction:"both"}),o=r?0:1,l=null,f=null,c=null,h;function d(){c&&Qe(e,c)}function m(u,_){const E=u.b-o;return _*=Math.abs(E),{a:o,b:u.b,d:E,duration:_,start:u.start,end:u.start+_,group:u.group}}function a(u){const{delay:_=0,duration:E=300,easing:v=Le,tick:S=C,css:k}=i||ct,A={start:Ke()+_,b:u};u||(A.group=I,I.r+=1),"inert"in e&&(u?h!==void 0&&(e.inert=h):(h=e.inert,e.inert=!0)),l||f?f=A:(k&&(d(),c=Ee(e,o,u,E,_,v,k)),u&&S(0,1),l=m(A,E),J(()=>ae(e,u,"start")),Ue(b=>{if(f&&b>f.start&&(l=m(f,E),f=null,ae(e,l.b,"start"),k&&(d(),c=Ee(e,o,l.b,l.duration,0,v,i.css))),l){if(b>=l.end)S(o=l.b,1-o),ae(e,l.b,"end"),f||(l.b?d():--l.group.r||K(l.group.c)),l=null;else if(b>=l.start){const w=b-l.start;o=l.a+l.d*v(w/l.duration),S(o,1-o)}}return!!(l||f)}))}return{run(u){he(i)?ot().then(()=>{i=i({direction:u?"in":"out"}),a(u)}):a(u)},end(){d(),l=f=null}}}function re(e){e&&e.c()}function W(e,t,n){const{fragment:r,after_update:s}=e.$$;r&&r.m(t,n),J(()=>{const i=e.$$.on_mount.map(Re).filter(he);e.$$.on_destroy?e.$$.on_destroy.push(...i):K(i),e.$$.on_mount=[]}),s.forEach(J)}function V(e,t){const n=e.$$;n.fragment!==null&&(st(n.after_update),K(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function ft(e,t){e.$$.dirty[0]===-1&&(G.push(e),nt(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function $(e,t,n,r,s,i,o=null,l=[-1]){const f=Z;Y(e);const c=e.$$={fragment:null,ctx:[],props:i,update:C,not_equal:s,bound:ve(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(f?f.$$.context:[])),callbacks:ve(),dirty:l,skip_bound:!1,root:t.target||f.$$.root};o&&o(c.root);let h=!1;if(c.ctx=n?n(e,t.props||{},(d,m,...a)=>{const u=a.length?a[0]:m;return c.ctx&&s(c.ctx[d],c.ctx[d]=u)&&(!c.skip_bound&&c.bound[d]&&c.bound[d](u),h&&ft(e,d)),m}):[],c.update(),h=!0,K(c.before_update),c.fragment=r?r(c.ctx):!1,t.target){if(t.hydrate){const d=Ye(t.target);c.fragment&&c.fragment.l(d),d.forEach(M)}else c.fragment&&c.fragment.c();t.intro&&L(e.$$.fragment),W(e,t.target,t.anchor),Ge()}Y(f)}class ee{constructor(){ce(this,"$$");ce(this,"$$set")}$destroy(){V(this,1),this.$destroy=C}$on(t,n){if(!he(n))return C;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const s=r.indexOf(n);s!==-1&&r.splice(s,1)}}$set(t){this.$$set&&!ze(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const at="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(at);const R=10,z=20,P=30,Ae=["Ты удалил этот ряд, как настоящий профессионал!","Ты прирожденный игрок, приятель!","Этот ход был круче, чем мои фильмы.","Транспортировщик линий!","Взял нож - режь, взял дошик - ешь.","Я живу, как карта ляжет. Ты живёшь, как мамка скажет.","Если заблудился в лесу, иди домой.","Никогда не сдавайтесь, идите к своей цели! А если будет сложно – сдавайтесь","Работа — это не волк. Работа — ворк. А волк — это ходить.","Если тебе где-то не рады в рваных носках, то и в целых туда идти не стоит.","Без подошвы тапочки — это просто тряпочки.","Я вообще делаю что хочу. Хочу импланты — звоню врачу.","В жизни всегда есть две дороги: одна — первая, а другая — вторая."],Se=["images/statham1.jpg","images/statham2.jpg","images/statham3.jpg","images/statham4.jpg"],xe="images/statham-face.jpg",Ce={I:{shape:[[1,1,1,1]],color:"#00f0f0"},O:{shape:[[1,1],[1,1]],color:"#f0f000"},T:{shape:[[0,1,0],[1,1,1]],color:"#a000f0"},S:{shape:[[0,1,1],[1,1,0]],color:"#00f000"},Z:{shape:[[1,1,0],[0,1,1]],color:"#f00000"},J:{shape:[[1,0,0],[1,1,1]],color:"#0000f0"},L:{shape:[[0,0,1],[1,1,1]],color:"#f0a000"}};function T(e,t,n){return t.shape.every((r,s)=>r.every((i,o)=>{let l=n.x+o,f=n.y+s;return i===0||l>=0&&l<R&&f<z&&e[f]&&e[f][l]===0}))}function ut(e,t,n){const r={...n,y:n.y+1};return T(e,t,r)?r:!1}function dt(e,t,n){const r=e.map(s=>[...s]);return t.shape.forEach((s,i)=>{s.forEach((o,l)=>{o&&r[i+n.y]&&r[i+n.y][l+n.x]!==void 0&&(r[i+n.y][l+n.x]=o)})}),r}function ht(e){let t=e.filter(r=>!r.every(s=>s));const n=e.length-t.length;for(;t.length<e.length;)t.unshift(new Array(e[0].length).fill(0));return{board:t,linesCleared:n}}function mt(e,t){return[0,40,100,300,1200][e]*(t+1)}function gt(e){let t,n;return{c(){t=y("div"),n=y("canvas"),p(n,"width",R*P),p(n,"height",z*P),p(n,"class","game-board svelte-qgb2b6"),p(t,"class","game-board-container svelte-qgb2b6")},m(r,s){B(r,t,s),g(t,n),e[5](n)},p:C,i:C,o:C,d(r){r&&M(t),e[5](null)}}}function pt(e,t,n){let{board:r=Array(z).fill().map(()=>Array(R).fill(0))}=t,{currentPiece:s}=t,{currentPosition:i}=t;et();let o,l,f,c=!1;_e(()=>{n(4,l=o.getContext("2d")),f=new Image,f.src=xe,f.onload=()=>{console.log("Statham image loaded successfully"),c=!0,h()},f.onerror=a=>{console.error("Failed to load Statham image:",a),console.error("Attempted image path:",xe),c=!1,h()},h()});function h(){if(l){l.clearRect(0,0,o.width,o.height);for(let a=0;a<z;a++)for(let u=0;u<R;u++)r[a][u]&&d(u*P,a*P);s&&i&&s.shape.forEach((a,u)=>{a.forEach((_,E)=>{if(_){const v=(i.x+E)*P,S=(i.y+u)*P;d(v,S)}})})}}function d(a,u){if(n(4,l.fillStyle="#666666",l),l.fillRect(a,u,P,P),c)try{const _=document.createElement("canvas");_.width=P,_.height=P,_.getContext("2d").drawImage(f,0,0,P,P),l.drawImage(_,a,u)}catch(_){console.error("Error drawing scaled image:",_)}n(4,l.strokeStyle="#000",l),n(4,l.lineWidth=2,l),l.strokeRect(a,u,P,P)}function m(a){le[a?"unshift":"push"](()=>{o=a,n(0,o)})}return e.$$set=a=>{"board"in a&&n(1,r=a.board),"currentPiece"in a&&n(2,s=a.currentPiece),"currentPosition"in a&&n(3,i=a.currentPosition)},e.$$.update=()=>{e.$$.dirty&30&&(r||s||i)&&l&&h()},[o,r,s,i,l,m]}class _t extends ee{constructor(t){super(),$(this,t,pt,gt,Q,{board:1,currentPiece:2,currentPosition:3})}}function wt(e){let t,n,r,s;return{c(){t=y("div"),n=y("h3"),n.textContent="Next Piece",r=O(),s=y("canvas"),p(n,"class","svelte-1dre7rs"),p(s,"width",e[1]),p(s,"height",e[1]),p(s,"class","svelte-1dre7rs"),p(t,"class","next-piece svelte-1dre7rs")},m(i,o){B(i,t,o),g(t,n),g(t,r),g(t,s),e[4](s)},p:C,i:C,o:C,d(i){i&&M(t),e[4](null)}}}const ue=6;function yt(e,t,n){let{piece:r}=t,s,i;const o=ue*P;_e(()=>{n(3,i=s.getContext("2d")),l()});function l(){if(!i||!r)return;i.clearRect(0,0,o,o);const h=r.shape[0].length,d=r.shape.length,m=Math.floor((ue-h)/2),a=Math.floor((ue-d)/2);r.shape.forEach((u,_)=>{u.forEach((E,v)=>{E&&f((m+v)*P,(a+_)*P)})})}function f(h,d){n(3,i.fillStyle="#666",i),i.fillRect(h,d,P,P),n(3,i.strokeStyle="#000",i),i.strokeRect(h,d,P,P)}function c(h){le[h?"unshift":"push"](()=>{s=h,n(0,s)})}return e.$$set=h=>{"piece"in h&&n(2,r=h.piece)},e.$$.update=()=>{e.$$.dirty&12&&r&&i&&l()},[s,o,r,i,c]}class vt extends ee{constructor(t){super(),$(this,t,yt,wt,Q,{piece:2})}}function bt(e){let t,n,r,s,i,o,l,f,c,h,d,m,a,u,_,E,v,S;return{c(){t=y("div"),n=y("div"),r=y("h3"),r.textContent="Score",s=O(),i=y("p"),o=N(e[0]),l=O(),f=y("div"),c=y("h3"),c.textContent="Level",h=O(),d=y("p"),m=N(e[1]),a=O(),u=y("div"),_=y("h3"),_.textContent="Lines",E=O(),v=y("p"),S=N(e[2]),p(r,"class","svelte-wbf86x"),p(i,"class","svelte-wbf86x"),p(n,"class","score-item svelte-wbf86x"),p(c,"class","svelte-wbf86x"),p(d,"class","svelte-wbf86x"),p(f,"class","score-item svelte-wbf86x"),p(_,"class","svelte-wbf86x"),p(v,"class","svelte-wbf86x"),p(u,"class","score-item svelte-wbf86x"),p(t,"class","score-board svelte-wbf86x")},m(k,A){B(k,t,A),g(t,n),g(n,r),g(n,s),g(n,i),g(i,o),g(t,l),g(t,f),g(f,c),g(f,h),g(f,d),g(d,m),g(t,a),g(t,u),g(u,_),g(u,E),g(u,v),g(v,S)},p(k,[A]){A&1&&X(o,k[0]),A&2&&X(m,k[1]),A&4&&X(S,k[2])},i:C,o:C,d(k){k&&M(t)}}}function Et(e,t,n){let{score:r=0}=t,{level:s=1}=t,{lines:i=0}=t;return e.$$set=o=>{"score"in o&&n(0,r=o.score),"level"in o&&n(1,s=o.level),"lines"in o&&n(2,i=o.lines)},[r,s,i]}class kt extends ee{constructor(t){super(),$(this,t,Et,bt,Q,{score:0,level:1,lines:2})}}function Oe(e,{delay:t=0,duration:n=400,easing:r=Le}={}){const s=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:r,css:i=>`opacity: ${i*s}`}}function Ie(e){let t,n,r,s,i,o,l,f,c,h,d;return{c(){t=y("div"),n=y("div"),r=y("img"),i=O(),o=y("p"),l=N(e[1]),be(r.src,s=e[2])||p(r,"src",s),p(r,"alt","Jason Statham"),p(r,"class","statham-image svelte-k0r6n3"),p(o,"class","quote svelte-k0r6n3"),p(n,"class","effect-content svelte-k0r6n3"),p(n,"key",e[3]),p(t,"class","effect-container svelte-k0r6n3")},m(m,a){B(m,t,a),g(t,n),g(n,r),g(n,i),g(n,o),g(o,l),c=!0,h||(d=ge(r,"error",At),h=!0)},p(m,a){(!c||a&4&&!be(r.src,s=m[2]))&&p(r,"src",s),(!c||a&2)&&X(l,m[1]),(!c||a&8)&&p(n,"key",m[3])},i(m){c||(m&&J(()=>{c&&(f||(f=Pe(t,Oe,{duration:300},!0)),f.run(1))}),c=!0)},o(m){m&&(f||(f=Pe(t,Oe,{duration:300},!1)),f.run(0)),c=!1},d(m){m&&M(t),m&&f&&f.end(),h=!1,d()}}}function Pt(e){let t,n=e[0]&&Ie(e);return{c(){n&&n.c(),t=Xe()},m(r,s){n&&n.m(r,s),B(r,t,s)},p(r,[s]){r[0]?n?(n.p(r,s),s&1&&L(n,1)):(n=Ie(r),n.c(),L(n,1),n.m(t.parentNode,t)):n&&(it(),q(n,1,1,()=>{n=null}),lt())},i(r){L(n)},o(r){q(n)},d(r){r&&M(t),n&&n.d(r)}}}const At=e=>e.target.style.display="none";function St(e,t,n){let{show:r=!1}=t,s="",i="",o,l=0;function f(){n(1,s=Ae[Math.floor(Math.random()*Ae.length)]),n(2,i=Se[Math.floor(Math.random()*Se.length)]),n(3,l+=1),o&&clearTimeout(o),o=setTimeout(()=>{n(0,r=!1)},2e3)}return je(()=>{o&&clearTimeout(o)}),e.$$set=c=>{"show"in c&&n(0,r=c.show)},e.$$.update=()=>{e.$$.dirty&1&&r&&f()},[r,s,i,l]}class xt extends ee{constructor(t){super(),$(this,t,St,Pt,Q,{show:0})}}function Me(e){let t,n,r;return{c(){t=y("button"),t.textContent="Pause",p(t,"tabindex","-1"),p(t,"class","svelte-1fv3mge")},m(s,i){B(s,t,i),n||(r=ge(t,"click",e[11]),n=!0)},p:C,d(s){s&&M(t),n=!1,r()}}}function Ct(e){let t,n,r,s,i,o,l,f,c,h,d,m,a=e[7]?"New Game":e[8]?"Resume":"Start",u,_,E,v,S,k,A;s=new _t({props:{board:e[0],currentPiece:e[1],currentPosition:e[3]}}),l=new vt({props:{piece:e[2]}}),c=new kt({props:{score:e[4],level:e[5],lines:e[6]}});let b=!e[7]&&!e[8]&&Me(e);return v=new xt({props:{show:e[9]}}),{c(){t=y("main"),n=y("div"),r=y("div"),re(s.$$.fragment),i=O(),o=y("div"),re(l.$$.fragment),f=O(),re(c.$$.fragment),h=O(),d=y("div"),m=y("button"),u=N(a),_=O(),b&&b.c(),E=O(),re(v.$$.fragment),p(r,"class","game-board svelte-1fv3mge"),p(m,"tabindex","-1"),p(m,"class","svelte-1fv3mge"),p(d,"class","controls svelte-1fv3mge"),p(o,"class","game-sidebar svelte-1fv3mge"),p(n,"class","game-container svelte-1fv3mge"),p(t,"class","svelte-1fv3mge")},m(w,x){B(w,t,x),g(t,n),g(n,r),W(s,r,null),g(n,i),g(n,o),W(l,o,null),g(o,f),W(c,o,null),g(o,h),g(o,d),g(d,m),g(m,u),g(d,_),b&&b.m(d,null),g(o,E),W(v,o,null),S=!0,k||(A=ge(m,"click",e[10]),k=!0)},p(w,[x]){const D={};x&1&&(D.board=w[0]),x&2&&(D.currentPiece=w[1]),x&8&&(D.currentPosition=w[3]),s.$set(D);const we={};x&4&&(we.piece=w[2]),l.$set(we);const te={};x&16&&(te.score=w[4]),x&32&&(te.level=w[5]),x&64&&(te.lines=w[6]),c.$set(te),(!S||x&384)&&a!==(a=w[7]?"New Game":w[8]?"Resume":"Start")&&X(u,a),!w[7]&&!w[8]?b?b.p(w,x):(b=Me(w),b.c(),b.m(d,null)):b&&(b.d(1),b=null);const ye={};x&512&&(ye.show=w[9]),v.$set(ye)},i(w){S||(L(s.$$.fragment,w),L(l.$$.fragment,w),L(c.$$.fragment,w),L(v.$$.fragment,w),S=!0)},o(w){q(s.$$.fragment,w),q(l.$$.fragment,w),q(c.$$.fragment,w),q(v.$$.fragment,w),S=!1},d(w){w&&M(t),V(s),V(l),V(c),b&&b.d(),V(v),k=!1,A()}}}function Ot(e,t,n){let r=Array(z).fill().map(()=>Array(R).fill(0)),s=null,i=null,o={x:0,y:0},l=0,f=0,c=0,h,d=!1,m=!1,a=!1;function u(){const k=Object.keys(Ce);return{...Ce[k[Math.floor(Math.random()*k.length)]]}}function _(){console.log("Starting game..."),h&&clearInterval(h),n(0,r=Array(z).fill().map(()=>Array(R).fill(0))),n(1,s=u()),n(2,i=u()),n(3,o={x:Math.floor(R/2)-1,y:0}),n(4,l=0),n(5,f=0),n(6,c=0),n(7,d=!1),n(8,m=!1),n(9,a=!1),h=setInterval(E,1e3-f*50),console.log("Game loop started")}function E(){if(m||d)return;console.log("Game update tick");const k=ut(r,s,o);if(k)n(3,o=k);else{console.log("Piece landed"),n(0,r=dt(r,s,o));const{board:A,linesCleared:b}=ht(r);n(0,r=A),b>0&&(n(6,c+=b),n(4,l+=mt(b,f)),n(5,f=Math.floor(c/10)),n(9,a=!1),setTimeout(()=>{n(9,a=!0)},50),clearInterval(h),h=setInterval(E,1e3-f*50)),n(1,s=i),n(2,i=u()),n(3,o={x:Math.floor(R/2)-1,y:0}),T(r,s,o)||(console.log("Game Over!"),n(7,d=!0),clearInterval(h))}}function v(k){if(!(d||m))switch(["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"," ","p","P"].includes(k.key)&&k.preventDefault(),k.key){case"ArrowLeft":T(r,s,{...o,x:o.x-1})&&n(3,o={...o,x:o.x-1});break;case"ArrowRight":T(r,s,{...o,x:o.x+1})&&n(3,o={...o,x:o.x+1});break;case"ArrowUp":const A={...s,shape:s.shape[0].map((w,x)=>s.shape.map(D=>D[x]).reverse())};T(r,A,o)&&n(1,s=A);break;case"ArrowDown":const b={...o,y:o.y+1};T(r,s,b)&&n(3,o=b);break;case" ":for(;T(r,s,{...o,y:o.y+1});)n(3,o={...o,y:o.y+1});break;case"p":case"P":n(8,m=!m);break}}return _e(()=>{window.addEventListener("keydown",v),_()}),je(()=>{window.removeEventListener("keydown",v),h&&clearInterval(h)}),[r,s,i,o,l,f,c,d,m,a,_,()=>n(8,m=!0)]}class It extends ee{constructor(t){super(),$(this,t,Ot,Ct,Q,{})}}const qe=document.getElementById("app");qe||console.error("Target element #app not found!");new It({target:qe});
